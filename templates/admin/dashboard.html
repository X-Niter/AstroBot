{% extends "base.html" %}

{% block breadcrumb %}
<li class="breadcrumb-item active">Admin Dashboard</li>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-lg-8">
            <h1 class="fs-2 mb-3">
                <i class="fas fa-tachometer-alt me-2"></i> Admin Dashboard
            </h1>
            <p class="text-muted">
                Manage your AstroBot infrastructure, monitor performance, and deploy updates with ease.
            </p>
        </div>
        <div class="col-lg-4">
            <div class="d-flex justify-content-end align-items-center h-100">
                <div class="alert alert-success mb-0 py-2">
                    <i class="fas fa-check-circle me-2"></i> All systems operational
                </div>
            </div>
        </div>
    </div>

    <!-- System Status -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stat-card h-100">
                <div class="card-body">
                    <div class="stat-icon primary">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="stat-value">16</div>
                    <div class="stat-label">Active Shards</div>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stat-card h-100">
                <div class="card-body">
                    <div class="stat-icon success">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value">237</div>
                    <div class="stat-label">Discord Servers</div>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 23.7%;" aria-valuenow="23.7" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stat-card h-100">
                <div class="card-body">
                    <div class="stat-icon info">
                        <i class="fas fa-memory"></i>
                    </div>
                    <div class="stat-value">63.2%</div>
                    <div class="stat-label">System Load</div>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-info" role="progressbar" style="width: 63.2%;" aria-valuenow="63.2" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card stat-card h-100">
                <div class="card-body">
                    <div class="stat-icon warning">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="stat-value">1.24M</div>
                    <div class="stat-label">Commands Today</div>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar bg-warning" role="progressbar" style="width: 78.4%;" aria-valuenow="78.4" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-bolt me-2"></i> Quick Actions</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 mb-3">
                            <a href="{{ url_for('admin_deployment') }}" class="card action-card h-100">
                                <div class="card-body text-center">
                                    <div class="action-icon primary mb-3">
                                        <i class="fas fa-rocket"></i>
                                    </div>
                                    <h5>Deploy Changes</h5>
                                    <p class="text-muted small">Zero-downtime updates</p>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <a href="{{ url_for('admin_shards') }}" class="card action-card h-100">
                                <div class="card-body text-center">
                                    <div class="action-icon success mb-3">
                                        <i class="fas fa-cubes"></i>
                                    </div>
                                    <h5>Manage Shards</h5>
                                    <p class="text-muted small">Add, balance, or scale</p>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <a href="{{ url_for('admin_logs') }}" class="card action-card h-100">
                                <div class="card-body text-center">
                                    <div class="action-icon warning mb-3">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <h5>System Logs</h5>
                                    <p class="text-muted small">View system activity</p>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <a href="{{ url_for('admin_settings') }}" class="card action-card h-100">
                                <div class="card-body text-center">
                                    <div class="action-icon info mb-3">
                                        <i class="fas fa-cogs"></i>
                                    </div>
                                    <h5>System Settings</h5>
                                    <p class="text-muted small">Configure system params</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Deployments & Alerts -->
    <div class="row mb-4">
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-history me-2"></i> Recent Deployments</h5>
                    <a href="{{ url_for('admin_deployments_history') }}" class="btn btn-sm btn-outline-light">View All</a>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item bg-dark border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <div>
                                    <span class="badge bg-success me-2">Success</span>
                                    <strong>v1.4.2</strong> - Performance Improvements
                                </div>
                                <small class="text-muted">2 days ago</small>
                            </div>
                            <div class="text-muted small">
                                Deployed by <span class="text-primary">admin</span> • 
                                Blue/Green deployment • 
                                Duration: 8m 42s
                            </div>
                        </div>
                        <div class="list-group-item bg-dark border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <div>
                                    <span class="badge bg-warning me-2">Partial</span>
                                    <strong>v1.4.1</strong> - Twitch Integration Fixes
                                </div>
                                <small class="text-muted">5 days ago</small>
                            </div>
                            <div class="text-muted small">
                                Deployed by <span class="text-primary">admin</span> • 
                                Rolling update • 
                                Duration: 15m 27s
                            </div>
                        </div>
                        <div class="list-group-item bg-dark border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <div>
                                    <span class="badge bg-success me-2">Success</span>
                                    <strong>v1.4.0</strong> - AI Moderation Features
                                </div>
                                <small class="text-muted">1 week ago</small>
                            </div>
                            <div class="text-muted small">
                                Deployed by <span class="text-primary">admin</span> • 
                                Blue/Green deployment • 
                                Duration: 12m 15s
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i> System Alerts</h5>
                    <a href="{{ url_for('admin_alerts') }}" class="btn btn-sm btn-outline-light">View All</a>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item bg-dark border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <div>
                                    <span class="badge bg-warning me-2">Warning</span>
                                    <strong>Shard-2 High Memory Usage</strong>
                                </div>
                                <small class="text-muted">10 minutes ago</small>
                            </div>
                            <div class="text-muted small">
                                Memory usage at 72% - consider balancing servers across shards
                            </div>
                        </div>
                        <div class="list-group-item bg-dark border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <div>
                                    <span class="badge bg-success me-2">Resolved</span>
                                    <strong>Database Connection Issues</strong>
                                </div>
                                <small class="text-muted">2 hours ago</small>
                            </div>
                            <div class="text-muted small">
                                Intermittent connection drops resolved by database cluster failover
                            </div>
                        </div>
                        <div class="list-group-item bg-dark border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <div>
                                    <span class="badge bg-info me-2">Info</span>
                                    <strong>Auto-scaling Event</strong>
                                </div>
                                <small class="text-muted">1 day ago</small>
                            </div>
                            <div class="text-muted small">
                                System automatically added 2 new shards to handle increased load
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- System Health & Resources -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-heartbeat me-2"></i> System Health</h5>
                    <select class="form-select form-select-sm" style="width: auto;">
                        <option>Last 24 hours</option>
                        <option>Last 7 days</option>
                        <option>Last 30 days</option>
                    </select>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card bg-dark">
                                <div class="card-body">
                                    <h6 class="card-title">CPU Usage</h6>
                                    <div class="graph-container" style="height: 200px;">
                                        <!-- This would be a real chart in the actual implementation -->
                                        <div class="placeholder-graph d-flex justify-content-center align-items-center" style="height: 100%; background-color: #2d3238;">
                                            <span class="text-muted">CPU utilization chart would appear here</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card bg-dark">
                                <div class="card-body">
                                    <h6 class="card-title">Memory Usage</h6>
                                    <div class="graph-container" style="height: 200px;">
                                        <!-- This would be a real chart in the actual implementation -->
                                        <div class="placeholder-graph d-flex justify-content-center align-items-center" style="height: 100%; background-color: #2d3238;">
                                            <span class="text-muted">Memory utilization chart would appear here</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_styles %}
<style>
    .action-card {
        transition: all 0.2s ease;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .action-card:hover {
        transform: translateY(-5px);
        border-color: rgba(255, 255, 255, 0.2);
    }
    
    .action-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
    }
    
    .action-icon i {
        font-size: 1.5rem;
        color: white;
    }
    
    .action-icon.primary {
        background-color: var(--primary);
    }
    
    .action-icon.success {
        background-color: var(--success);
    }
    
    .action-icon.warning {
        background-color: var(--warning);
    }
    
    .action-icon.info {
        background-color: var(--info);
    }
    
    .placeholder-graph {
        border: 1px dashed rgba(255, 255, 255, 0.2);
        border-radius: 0.25rem;
    }
</style>
{% endblock %}